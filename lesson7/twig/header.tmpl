<div class="header">
    <div class="container">
        <a href="/">
            <img class="logo" src="/img/logo.png" alt="">
        </a>
        <a href="/">Главная</a><br>

        <div class="basket">
            <a href="/product/basket">Корзина: {{ countGoods }}</a>
            <div class="hover-list">
                Ваш заказ: {{ item.count }}
                {% set total = 0 %}
                {% for item in items %}
                <div class="product-item">
                    {% set sum = "#{item.price}" * "#{item.0}" %}
                    {% set total = "#{total}" + "#{sum}" %}
                    {{ item.name }} - {{ item.price }} руб. x {{ item.0 }} = {{ sum }}
                    <a id="{{ item.id }}" class="del">[-]</a>
                </div>

                {% endfor %}
                <hr>
                <p>Итого: {{ total }}</p>

            </div>
        </div>

        <div class="auth">
            {% if auth %}
            "Добро пожаловать, {{ username }} <a href='/user/logout'> [выход]</a>";
            {% else %}
            <form method="post" action="/user/login">
                <input type='text' name='login' placeholder='Логин'>
                <input type='password' name='pass' placeholder='Пароль'>
                Save? <input type='checkbox' name='save'>
                <input type='submit' name='send'>
            </form>
            <a href="/user/reg" class="reg">Зарегистрироваться</a>
            {% endif %}
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        $(".del").on('click', function () {
            let id = this.id;

            $.ajax({
                url: "/product/DelBasket/",
                type: "POST",
                dataType: "json",
                data: {
                    id: id
                },
                error: function () {
                    alert('error');
                },
                success: function (answer) {
                    console.log(id);
                        window.location.reload()

                }

            })
        });

    });
    </script>
